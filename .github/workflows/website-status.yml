name: Website Status Check

on:
  schedule:
    - cron: "*/5 * * * *"
  workflow_dispatch:

jobs:
  check:
    runs-on: ubuntu-latest

    steps:
      - name: Check website
        run: |
          STATUS=$(curl -Is https://example.com || true | head -n 1)

          if echo "$STATUS" | grep -E "200|301|302"; then
            echo "Website UP"
          else
            curl -s -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_TOKEN }}/sendMessage" \
              -d chat_id=${{ secrets.TELEGRAM_CHAT_ID }} \
              -d text="üö® Website DOWN ‚ùå
Status: $STATUS
URL: https://example.com
Time: $(date)"
          fi
